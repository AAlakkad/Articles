
[TOC]


# ما هو Bower؟

صفحات الويب التي نستعرضها في المتصفح تتألف من مكونات متعددة؛ كأطر العمل، المكتبات، ملفات JavaScript وCSS وغيرها.

[Bower](http://bower.io) هو أداة لإدارة هذه المكونات -الحزم- المخصصة للويب، من تنصيب وتحديث وحذف وغيرها من عمليات الإدارة.

Bower يشبه إلى حد كبير تلك الأدوات الأخرى المخصصة لإدارة الحزم، مثل gem للغة روبي وcomposer لـ PHP و npm لـ nodejs.

## ما الفائدة منه؟ ألا يمكنني متابعة عملي كما اعتدت من دونه؟

لأداة Bower فوائد عديدة، لنفرض أن مشروعك القادم يحتاج إلى استخدام مكتبة [jQuery](http://jquery.com) وإطار عمل [Twitter Bootstrap](http://getbootstrap.com) وخط الأيقونات [FontAwesome](http://fortawesome.github.io/Font-Awesome).

لتحميل كل واحدة من المتطلبات يقوم المطور بما يلي:
- الذهاب إلى موقع المكتبة أو إطار العمل
- التوجه إلى زر التحميل
- تحميل الملف المضغوط
- فك ضغط الملف المضغوط في مجلد المشروع

لو كان المشروع يحتاج إلى 3 أدوات فقط سيقوم المطور بتكرار الخطوات السابقة 3 مرات، ولو كان يحتاج 10 أدوات سيقوم بتكرار الخطوات 10 مرات! هل ترون حجم العمل المطلوب فقط لتحميل المتطلبات؟

تعالوا بنا نرى كيف يمكن ﻷداة Bower أن تساعدنا في اختصار الوقت، بعد تنصيب الأداة على الحساب، يمكن تنزيل جميع ما سبق باستخدام الأمر التالي:
```bash
bower install jquery bootstrap fontawesome
```
فقط! بهذا نكون قد قمنا بتنصيب المتطلبات الثلاثة معاً، ونبدأ باستخدامها دون إضاعة وقت في تكرار الخطوات التقليدية، ومهما ازداد عدد المتطلبات يبقى تنصيبها بنفس هذه الطريقة البسيطة.

من ميزات هذه الأداة أيضاً تحديد الإصدار المطلوب للمكونات (سواء كانت مكتبات أو أطر العمل)، إن كنت تريد مثلاً الإصدار رقم 3.1.1 من إطار عمل Twitter Bootstrap فيمكن أن تحدد هذا عند استخدام Bower في أمر التنصيب نفسه، أما بالطريقة التقليدية فستحتاج إلى البحث هنا وهناك حتى تجد مبتغاك!

سنأتي لطريقة الاستخدام بالتفصيل، الأمثلة السابقة فقط لتوضيح الفوائد والميزات التي يقدمها Bower.

## من يقوم باستخدام Bower؟

الكثير من أطر العمل والمكتبات تستخدم Bower، على سبيل المثال:
- [Twitter Bootstrap](http://getbootstrap.com) إطار العمل الشهير، مخصص لإنشاء الواجهات وعناصر الويب.
- [Foundation](http://foundation.zurb.com/) إطار عمل شبيه بـ Twitter Bootstrap.
- [jQuery](http://jquery.com) مكتبة JavaScript الشهيرة.
- [angular.js](http://angularjs.org/) مكتبة JavaScript لإنشاء تطبيقات مؤلفة من صفحة ويب واحدة (SPA - Single Page Applications).
- [backbone](http://backbonejs.org/) مكتبة JavaScript لإنشاء تطبيقات ويب بنمط MVC.

في الواقع معظم إضافات وتحسينات أطر العمل والمكتبات الشهيرة تستخدم هذه الأداة، وذلك لضمان استخدام نسخة محددة من إطار العمل أو المكتبة التي تم إنشاء هذه الإضافة لها. كي لا يحدث مشكلات في عدم التوافقية بينهما.

## حسناً، أي نوع من المشاريع يمكنني استخدام Bower معه؟

يمكن استخدام Bower في أي مشروع ويب يحتاج إلى واجهات تظهر للمستخدم (Front-end)، سواء كانت المكونات يتم استخدامها بشكل مباشر من مجلد bower_components أو يتم معالجة المكونات واستخدامها في بناء مكوّنات مخصصة بناءً على متطلبات التصميم.

# كيف أبدأ؟

## متطلبات الاستخدام
يحتاج Bower إلى وجود لغة **nodejs** مع مدير الحزم الخاص بها **npm** وإلى نظام  **git** على الحاسب المراد تنصيب الأداة عليه.

### تنصيب nodejs
بالنسبة لمستخدمي ويندوز وماك، يمكن التوجه إلى موقع [nodejs](http://nodejs.org/download/) وتحميل ملف التنصيب المناسب حسب نظام التشغيل الذي تعمل عليه.

إن كنت تعمل على لينكس يمكنك اتباع الطريقة السابقة، أو يمكن تنصيب nodejs عن طريق المستودعات الخاصة بنظام التشغيل، مثلاً إن كنت تستخدم أبونتو (Ubuntu) أو أحد مشتقاته، يمكنك تنصيب nodejs عن طريق سطر الأوامر:
```bash
sudo apt-get install nodejs npn
```

### تنصيب git
بطريقة مشابهة لتنصيب nodejs يمكن التوجه إلى موقع [git الرسمي](http://git-scm.com/download) وتحميل ملف التنصيب المناسب لنظام التشغيل الذي تعمل عليه.

إن كنت تعمل على لينكس يمكن تنصيب git باستخدام المستودعات الخاصة بنظام التشغيل، في حال استخدام أبونتو (Ubuntu) أو أحد مشتقاته، يمكن تنصيب git عن طريق الأمر:
```bash
sudo apt-get install git
```

### سطر الأوامر
إن كنت تعمل على ويندوز فسطر الأوامر هو واجهة dos أو اختصاراً هو `cmd`، إن كنت تعمل على لينكس فهناك عدد من البرامج لمحاكاة سطر الأوامر أشهرها `Terminal` أو `Gnome Terminal` بحسب التوزيعة والواجهة التي تستخدمها، أما إن كنت تعمل على ماك فيمكن استخدام `iTerm`.

## التنصيب
بعد التأكد من وجود المتطلبات على حاسبك، ما عليك سوى فتح سطر الأوامر (command line) ثم كتابة الأمر:
```bash
npm install -g bower
```
إن كنت تعمل على نظام لينكس أو ماك وفشلت عملية التنصيب قد يتطلب منك الأمر أن تكتب أمر `sudo` في البداية ليتم استخدام صلاحيات المسؤول (root) في التنصيب، فيصبح الأمر:
```bash
sudo npm install -g bower
```

تهانينا! أصبحت أداة Bower موجودة على جهازك وقابلة للاستخدام. تابع معنا كيفية الاستخدام.

# استخدام Bower
أداة Bower هي أداة تعمل في سطر الأوامر، جميع الأوامر التي سنستخدمها تحتاج إلى كتابتها في سطر الأوامر (Command Line).

لنقم بفتح سطر الأوامر، ولنقم بإنشاء مجلد اسمه `bower_tutorials` ثم نتوجه إليه في المكان الذي قمنا بإنشاء المجلد فيه:
```bash
cd /home/ammar/www/bower_tutorials/
```

أصبحنا الآن جاهزين لبدء استخدام Bower.

## 1. تنصيب الحزم
ما رأيك لو نقوم بتنصيب jQuery الشهيرة؟ أمر سهل، اكتب هذا الأمر في سطر الأوامر:
```bash
bower install jquery
```

أصبحت مكتبة jQuery الشهيرة موجودة في المجلد الذي أنشأته، داخل مجلد اسمه `bower_components`.

حسناً، لنقم بتنصيب إطار عمل Twitter Bootstrap لكن بنسخة قديمة هي 3.1.1، يمكن ذلك عن طريق:
```bash
bower install bootstrap#3.1.1
```

أصبح Twitter Bootstrap بنسخته القديمة 3.1.1 جاهزاً، ما رأيكم بسهولة الأمر مقارنة بالطريقة التقليدية؟ :)

في الطريقة الأولى عندما قمنا بتنصيب jQuery لم نقم بتحديد الإصدار الذي نريده، في هذه الحالة يقوم Bower تلقائياً بتحميل آخر نسخة من المكوّن المطلوب، ويمكن أيضاً أن نفعل كما في المثال الثاني حيث قمنا بتحديد النسخة المطلوبة بالتحديد.

## 2. البحث عن الحزم

قد يحدث أن تقوم بطلب تنصيب حزمة أو مكوّن ولا يتم تنصيبه، يمكن أن تتأكد من وجود الحزمة عن طريق البحث.
للبحث عن Bootstrap ونرى ماذا يحوي مستودع Bower، نكتب:
```bash
bower search bootstrap
```
نرى عدداً كبيراً من نتائج البحث ظهرت في سطر الأوامر، كيف نعرف ما هي الحزمة التي نريدها من بين كل تلك الحزم؟
إن كنا نريد تنصيب مكوّن شهير، فغالباً ما تكون أول نتيجة بحث هي الحزمة المطلوبة، أول نتيجة تظهر في البحث هي:
```
    bootstrap git://github.com/twbs/bootstrap.git
```

نستفيد من البحث في حال كنا نبحث عن نسخة من الحزمة المطلوبة، أو عن إضافة لها، فمثلاً نجد ضمن نتائج البحث:
```
bootstrap-sass-twbs git://github.com/twbs/bootstrap-sass.git
```
هذه نسخة رسمية من Twitter Bootstrap لكنها مخصصة للعمل مع Sass بدلاً من ملفات CSS جاهزة.

## 3. حذف الحزم

بعد أن أصبح تنصيب الحزم واضحاً، ماذا لو قمتَ بتنصيب حزمة ثم لم تعد تريدها، أو قمتَ بتنصيب حزمة خاطئة غير التي تريدها؟
لحذف الحزمة يمكن استخدام الأمر:
```bash
bower uninstall bootstrap-sass-twbs
```
كما يمكن حذف عدة حزم دفعة واحدة في نفس الأمر:
```
bower uninstall bootstrap jquery fontawesome
```

## 4. عن ملف bower.json أهميته واستخداماته

لنفرض أنك تعمل ضمن فريق، قمت بتنصيب آخر نسخة من jQuery وآخر نسخة من Twitter Bootstrap، ثم بعد شهرين قام زميلك في العمل بتنصيب نفس الحزم. لكنه تفاجئ أن هناك أخطاء بدأت بالظهور لم تكن تظهر من قبل. بدأ يبحث عن المشكلة وعن تفاصيل الحزم المنصبة، وجد أن إصدارات الحزم التي قام بتنصيبها تختلف عن إصدارات الحزم التي قمتَ أنت بتنصيبها منذ شهرين والتي كان المشروع يعمل حينها بشكل جيد!

مثال آخر، لنفرض أنك تعمل في فريق، وأحد زملائك لا يعرف ما هي المتطلبات التي يحتاجها المشروع، هو يريد فقط أن يقوم بتجربة المشروع ويرى كيف يبدو شكله. سيحتاج إلى طريقة لتنصيب الحزم المطلوبة جميعها قبل أن يقوم بتشغيل المشروع ليرى كيف يبدو. لكنه غير مختص ولا يعرف كيف!

الحل للمثالين هو استخدام ملف `bower.json`.

ما هو هذا الملف؟
هو ملف يقوم بتعريف الحزم المستخدم في المشروع مع رقم الإصدار الخاص بكل حزمة، ثم يمكن تنصيب الحزم عن طريق الأمر:
```
bower install
```
هو نفسه أمر التنصيب لكن بدون ذكر أي حزم بعده، سيقوم عندها Bower بالبحث عن ملف `bower.json` وتنصيب الحزم المذكورة فيه حسب الإصدارات المذكورة.

بهذه الطريقة يمكن لأي شخص من فريق العمل أن يقوم بتنصيب جميع المتطلبات بشكل بسيط وسهل دون أن يعرفوا الحزم وإصداراتها المطلوبة.

### كيفية إنشاء ملف bower.json ووضع الحزم المطلوبة بداخله

يمكن إنشاء ملف `bower.json` باستخدام أي محرر نصوص، لكن الطريقة الأفضل هي استخدام الأمر الخاص بإنشاءه عن طريق الأداة نفسها، كما يلي:
```bash
bower init
```
بعد ضغط زر `Enter` تظهر بضع أسئلة وخطوات، يمكن أن يتم تجاهل ملء الخطوات جميعها عدا الخطوة الأولى يجب ألا تكون فارغة، لكن الأفضل ملء الخطوات جميعها إن أمكن حتى يصبح المشروع أوضح.

الخطوات هي:
```
? name: bower-introduction
```
يسأل هنا عن اسم المشروع، يجعل اسم المجلد الحالي هو اسم المشروع بشكل افتراضي، إن تم ضغط زر `Enter` يتم استخدام اسم المجلد، أو يتم كتابة اسم المشروع ثم ضغط زر `Enter`.
```
? version: 0.0.0
```
يسأل هنا عن إصدار المشروع الجديد الذي تريد إنشاء ملف `bower.json` من أجله، بشكل افتراضي يكون الإصدار هو `0.0.0` ويمكن تغيير الإصدار بكتابته أو ضغط زر `Enter` لاستخدام القيمة الموجود افتراضياً.
```
? description: 
```
هنا يتم وضع وصف للمشروع الحالي، يمكن تركه فارغاً وضغط زر `Enter` أو يمكن وضع وصف مناسب للمشروع ثم ضغط زر `Enter`.
```
? main file: 
```
هنا يتم وضع الملف الرئيسي للمشروع مثلاً: `index.html`. 
```
? what types of modules does this package expose?: 
```
### ** هنا يجب كتابة شرح
```
? keywords: 
```
الكلمات المفتاحية للمشروع مفصولة بفواصل `,` .
```
? authors: Ammar Alakkad <am.alakkad@gmail.com>
```
اسم أو أسماء المطورين للمشروع، يمكن أن يتم وضع اسم المطور يليه بريده الإلكتروني بين قوسين `Name <email@example.com>`.
```
? license: MIT
```
رخصة استخدام المشروع.
```
? homepage: 
```
صفحة المشروع على الإنترنت إن وجدت.
```
? set currently installed components as dependencies?: Yes
```
إن تم تنصيب حزم قبل إنشاء الملف، هل تريد أن يتم وضعها ضمن الحزم المطلوبة في الملف؟
```
? add commonly ignored files to ignore list?: Yes
```
إضافة الملفات المتعارف على إضافتها إلى لائحة التجاهل في `git` (تحديداً إلى ملف `.gitignore`)، حيث لا يرغب المطورون عادة بوجود هذه الملفات المتعارف عليها ضمن مستودع `git`. 
```
? would you like to mark this package as private which prevents it from being accidentally published to the registry?: No
```
هل تريد جعل الحزمة خاصة بحيث لا يتم إضافة على مستودعات Bower؟ الإجابة الافتراضية هي نعم، إن أردت أن تكون الحزمة خاصة دون نشرها يمكن كتابة كلمة `no` ثم ضغط زر `Enter`.

### ** الفرق بين المتطلبات ومتطلبات التطوير

## 5. هل يمكن تنصيب الحزم في مجلد مختلف؟
قد يرغب البعض بعدم تسمية مجلد الحزم بالاسم الافتراضي `bower_components` ويرغب بتغييره، لا يجب تغيير هذا الاسم عن طريق إعادة التسمية، بل يتم إضافة ملف آخر يوضع فيه اسم المجلد المرغوب بوضع الحزم بداخله.

نقوم بإنشاء ملف باسم `.bowerrc` نضع بداخله:
```json
{
	{
		"directory": "my_components"
	}
}
```

بهذا عند تنصيب أو تحديث الحزم، سيتم وضعها في مجلد `my_components` بدلاً من المجلد الافتراضي.

## 6. هل هناك أدوات تدعم وتتناغم مع Bower؟


هناك عدد من الأدوات التي تدعم Bower منها:
- [CodeKit](https://incident57.com/codekit/) تطبيق لنظام تشغيل ماك مخصص لإنشاء المواقع.
- [Sublime bower](https://github.com/benschwarz/sublime-bower) إضافة لمحرر النصوص الشهير Sublime Text تسمح بتنصيب الحزم من خلال البرنامج نفسه.
- [Atom Bower Install](https://github.com/gdi2290/atom-bower-install) إضافة لمحرر atom مفتوح المصدر تقوم بتنصيب الحزم من خلال البرنامج نفسه.
- [WebStorm](https://www.jetbrains.com/webstorm) برنامج بيئة متكاملة لتطوير مواقع الويب يتميز بتعامل قوي جداً مع JavaScript، يملك هذا البرنامج دعماً مدمجاً به لأداة Bower.
- [Visual Studio 2015](https://visualstudio.com/free) النسخة الأخيرة من Visual Studio مدمجة مع دعم لأداة Bower للبحث وتنصيب الحزم.
- [Package Intellisense for Visual Studio 2013](https://visualstudiogallery.msdn.microsoft.com/65748cdb-4087-497e-a394-2e3449c8e61e)  إضافة مخصصة لـ Visual Studio لإضافة دعم مدير حزم nodejs مع أداة Bower.

هناك أيضاً عدد من الإضافات الخاصة بمشغلات المهام `Grunt` و `Gulp` و `broccoli`.


كما قرأنا معاً، Bower أداة بسيطة الاستخدام وكبيرة المفعول، تساعد في إدارة الحزم والمتطلبات الخاصة بمشاريع الويب، بشكل يسهل استخدامها ويضمن تنصيب جميع المكونات المطلوبة لعمل المكونات الأساسية ويسهّل تعامل عدد من المطورين معاً في نفس المشروع، عن طريق حصولهم على نفس المتطلبات بالإصدارات المحددة.

أرجو أن تكونوا قد استفدتم من هذا الشرح، في حال وجود أي استفسار أو تساؤل لا تترددوا بوضعه في التعليقات.