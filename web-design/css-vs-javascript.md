# CSS مقابل جافاسكريبت، الأساطير تتهاوى

هناك اعتقاد خاطئ بين العديد من مطوّري الويب أن CSS هي الطريقة الوحيدة للقيام بالحركات. برزت CSS بقوة كأكثر نظام مدلل خلال سنوات وحتى الآن، وتم الحديث عنها بين المطوّرين دون توقف حول متانتها وتوافقها مع أجهزة الجوال. CSS جيدة لكنها ليست أفضل من جافاسكريبت. هناك بعض الأساطير حول CSS قادت المطوّرين بشكل استباقي لتبني هذا النظام (CSS) والتخلي عن كلٍّ من جافاسكريبت والحركات الخاصّة بها.

الاستخدام الفعّال لـ CSS هو ما جعل المطوّرين يشعرون بالحيرة بينما يقومون بإدارة التفاعل بين العناصر من داخل style sheets، يجبرون أنفسهم على جعل مشروعهم متوافقاً مع Internet Explorer 8 و 9، وأخيراً، الابتعاد تماماً عن الحركات الجاهزة التي لا تتوفر إلا عن طريق جافاسكريبت.

هذا المقال هو فقط حول دحض بعض الأساطير حول CSS وكشف جميع المشاكل الأساسية التي بالكاد يتحدث الناس عنها بسبب إعجابهم بـ CSS. يهدف المقال إلى رفع معرفتك ووعيك بفوائد استخدام جافاسكريبت، بحيث يمكنك بسهولة التخلص من المواقف التي تثير غضبك.

لذا، دون مزيد من الحشو دعونا تنتاقش حول كل منهم بالتفصيل.

## 1. jQuery

دعونا نبدأ بالأساسيات، يتم الخلط بين الجافاسكريبت ومكتبة jQuery . الحركات المصممة بجافاسكريبت هي سريعة ومرنة، بينما المصممة بـ jQuery بطيئة. السبب أنها -بالرغم من مواصفاتها القوية- لم يكن هدفها الرئيسي تنفيذ الحركات. هناك العديد من الأسباب لدعم هذا:

- jQuery لا يمكنها ببساطة التوقف عن استخدام "ضرب النسق/التصميم" نظراً لهيكلتها البرمجية التي تخدم عدداً من الأغراض غير الحركات. هذا بشكل عام يسبب تقطّع في المراحل الأولى من الحركات.
- الذاكرة التي تستهلكها jQuery دوماً تحرّك جمع القمامة مما يؤدي إلى تجمد/توقف الحركات. نظراً لجمع القمامة، يمكن للمرء أن يواجه تقطّع أثناء الحركات.
- تم تصميم jQuery لتستخدم `set_interval()` وليس طلب إطار الحركة (Request Animation Frame  - RAF). عندما لا يكون طلب إطار الحركة موجوداً فيمكن أن ينتج عن ذلك حركات بعدد إطارات منخفض (جودة ودقة الحركة تعتمد على عدد الإطارات التي تظهر في الثانية، العدد المثالي هو 60 إطار في الثانية).


## 2. افتقار التحكم بالتدوير وتحديد الموقع

استخدام المتحكمات للحركات، التدوير، وتحديد المواقع هي إحدى الميزات الأساسية الضرورية أثناء تنفيذ الحركات. في CSS، جميع هذه الدوالّ تم تكديسها في خاصية متعارف عليه هي `tranform`. هذه تُنشئ مشاكل لتحريك شيء ما بطريقة فريدة عن طريق عنصر **شائع**. على سبيل امثا، إذا أردت تحريك "التدوير" و"التكبير" بشكل منفصل، باستخدام أزمنة مختلفة. هذا شيء ممكن فقط عن طريق جافاسكريبت ﻷنها تُمكّنك من استخدام حيل متنوعة، وهذه غير مسموحة في CSS. هذه إحدى مساوئ CSS. هي جيدة فقط من أجل مشاريع حركات بسيطة وليست من أجل تلك المشاريع التي تتطلب تصميم حركة قوية يحتاج للاندماج.


## 3. الأداء مع مكتبتيّ Velocity وGSAP

Velocity وGSAP هما المكتبتان الرائدتان والأكثر شعبية في جافاسكريبت. كلاهما يعمل مع أو بدون jQuery. عندما يتم استخدام أيّ من هاتين المكتبتين جنباً إلى جنب مع jQuery فلا يوجد هناك أي تدهور/تباطؤ من حيث الأداء لأنهم يعملون بشكل مستقل عن حركات jQuery الأساسية.

ويمكن أيضاً لهاتين المكتبتين أن يتم استخدامها بسهولة عندما لا تكون مكتبة jQuery موجودة في الصفحة. وهذا يبين بوضوح أنه بدلاً من ربط جميع أنواع استدعاءات الحركات في عنصر jQuery مشترك- كما هو مبين أدناه- يمكنك بشكل مباشر تمرار العنصر المراد إلى استدعاء الحركة.

```javascript
/* Working without jQuery */

Velocity(element, { opacity: 0.4 }, 900); // Velocity

TweenMax.to(element, 1, { opacity: 0.4 }); // GSAP
```

في المثال السابق، يمكنك ملاحظة أن Velocity تستخدم نفس الصيغة حتى عندما لا يتم استخدام jQuery. قامت فقط بإزاحة جميع العناصر تجاه اليمين لترك مساحة للعناصر المستهدفة.

بالمقابل، في GSAP تم استخدام تصميم كائني التوجه جنباً إلى جنب مع دالّة بسيطة ثابتة. بهذه الطريقة المستخدم يملك تحكم كامل بعملية الحركة.
ه سيطرة كاملة على عملية تحريك الرسوم.

## 4. GPU عامل **

> وGPU الأمثل تماما تعتبر كبيرة بالنسبة لأداء مجموعة متنوعة من المهام بما في ذلك اللعب حولها مع تحويل مصفوفات والتعتيم، وهذا هو السبب في جميع المتصفحات الرائدة أولا تفرغ هذه المهام من وحدة المعالجة المركزية إلى GPU. والهدف الرئيسي هو فصل جميع العناصر المتحركة على طبقات GPU الخاصة بها لفي أقرب وقت كما هو الحال في النظام مع إنشاء طبقات GPU لم يعد يظهر قلق للتحرك بكسل ومنها مجتمعة معا. لذلك، ليست هناك حاجة لحساب كل بكسل في كل دقيقة واحدة. وبدلا من ذلك يمكنك حفظ الكثير من الوقت بمجرد تحريك بكسل واحد على الآخر.

> **يرجى ملاحظة:** ليست هناك حاجة لإعطاء كل عنصر طبقة خاصة بها نظرا لذاكرة الفيديو المقيد للGPU. إذا كنت قد نفد من الذاكرة، كل شيء يحصل عابث.

> من ناحية أخرى، إذا قمت بتعريف الرسوم المتحركة في CSS ثم سيكون من مسؤولية المتصفح لتحديد طبقة GPU كل عنصر، وبالتالي تقسيم ستجري وفقا لذلك.

> ومع ذلك، وهذا هو الأمر الذي يمكن أن تفعله مع جافاسكريبت كذلك. تم تعيين كل ما عليك القيام به تحويل مع ميزة 3D (تماما مثل `translate3d()` أو `matrix3d​​()`) للسماح للمتصفح معرفة عملية خلق طبقة GPU للعنصر المستهدفة. لذلك، وهذا هو الطريق فمن الواضح أن GPU لا توفر سوى زيادة السرعة إلى CSS ولكن إلى تشغيل الجافا كذلك.

## 5. قوة حركات جافاسكريبت

جافاسكريبت لديها كل الإمكانيات للفوز بالمقارنة مع CSS من حيث الأداء. جافاسكريبت هي أسرع. ولكن إلى أي حدّ يمكن أن تكون أسرع؟ لنبدأ بأنها مرنة بما فيه الكفاية لإنشاء عرض حركات ثلاثيّة الأبعاد (3D) ملفت للنظر، التي يمكن أن تراها عبر WebGL. وأيضاً سريعة بشكلٍ كافٍ لبناء دعاية وسائط متعددة، والتي كان من الممكن تطويرها باستخدام Flash أو After Effects. وبالتأكيد بناء عالم افتراضي باستخدام جافاسكريبت بمساعدة canvas.

وبقدر ما تكون المكتبات مقلقة فإن الحديث عن توثيق **Transit** و **Velocity** هو منصف جداً. لمزيد من التوضيح لهذه النقطة، قمنا بالتزويد بقائمة تحسينات يمكن فقط للحركات المبنية بجافاسكريبت أن تؤديها.

- مزامنة DOM
- التخزين المؤقت للخصائص عبر سلسلة استدعاءات للتخفيف من توليد استعلامات DOM.
- التخزين المؤقت لنسب تحويل الواحدات

## الاستنتاج

النقاط المذكورة أعلاه تسلط الضوء بوضوح على براعة الحركات المبنية على جافاسكريبت بالمقارنة مع تلك المبنية على CSS. ولكن هل هذا يعني أن حركات CSS هي "سيئة"؟ لا، بالتأكيد لا. فهي جيدة ولكن فقط لأداء حركات أساسية. لمرونة وقدرات فريدة أعلى، يجب أن تعطي جافاسكريبت الأولوية.

----

المصدر: 
http://www.script-tutorials.com/css-vs-javascript-myths-fall-to-pieces/